import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { State, Store } from "@sambego/storybook-state";
import { action } from '@storybook/addon-actions';

import Timeline from './Timeline';
import EntitySlider from './entityslider/EntitySlider';
import Playhead from './playhead/Playhead';

import data from './timeline.data.json';

export const timelineStore = new Store({
  currentTime: 50,
  duration: 1000,
});

export const playheadStore = new Store({
  currentTime: 0,
  duration: 10000,
});

export const onTimelineChange = (newTime) => {
  action('onTimelineChange')(newTime);
  timelineStore.set({ currentTime: newTime });
}

export const onPlayheadChange = (newTime) => {
  action('onPlayheadChange')(newTime);
  playheadStore.set({ currentTime: newTime });
}

<Meta title="Timeline" />

# Timeline

## Empty

<Preview>
  <Story name="Empty">
    <State store={timelineStore}>
      {state =>
        <Timeline
          duration={state.duration}
          onChange={onTimelineChange}
        />
      }
     </State>
  </Story>
</Preview>

## Populated

<Preview>
  <Story name="Populated">
    <State store={timelineStore}>
      {state =>
        <Timeline
          currentTime={state.currentTime}
          data={data}
          duration={state.duration}
          onChange={onTimelineChange}
        />
      }
     </State>
  </Story>
</Preview>

## Prop types

<Props of={Timeline} />

# Partials

## Playhead

<Preview>
  <Story name="Partials Â» Playhead">
    <State store={playheadStore}>
      {state =>
        <Playhead
          currentTime={state.currentTime}
          duration={state.duration}
          onChange={onPlayheadChange}
        />
      }
     </State>
  </Story>
</Preview>
